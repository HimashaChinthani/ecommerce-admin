# eCommerce Admin (Simple Readme)

This project is a small e-commerce admin site with an API and a client dashboard.

Quick overview
- `src/` - server code (Express, Sequelize, AdminJS)
- `client/` - React + Vite frontend
- `uploads/` - uploaded product images (used in development)

Requirements
- Node.js (v18+ recommended)
- PostgreSQL database

Environment
Create a `.env` file in the project root with these values (example):

```
PORT=4000
DATABASE_URL=postgres://USER:PASS@HOST:PORT/DBNAME
JWT_SECRET=your_jwt_secret_here
ADMIN_COOKIE_SECRET=your_admin_cookie_secret_here
```

Run locally
1. Install root deps and client deps:
   - In project root:
     ```powershell
     npm install
     cd client
     npm install
     cd ..
     ```
2. Start the server in development (auto-restart with nodemon):
   ```powershell
   npm run dev
   ```
   The API will run on `http://localhost:4000` by default.

3. Start the client dev server (in a separate terminal):
   ```powershell
   cd client
   npm run dev
   ```

Build for production
- Build the client from the project root:
  ```powershell
  npm run build
  ```
- The command runs `npm run build` inside `client/` (Vite build).

Serve the built client (optional)
- You can serve `client/dist` with any static server, or add an Express static route to serve the files.

API notes
- The server provides REST endpoints under `/api`.
- Authentication uses JWTs (login returns a token). Protect routes use `Authorization: Bearer <token>`.
- Product images are stored in the DB as binary fields (in development they may also be served from `uploads/`).

Admin UI
- AdminJS is mounted at `/admin`.
- Provide an admin user in the DB (role: `admin`) to sign in. Admin sessions use `ADMIN_COOKIE_SECRET`.

Serverless / Vercel
- The app avoids running `sequelize.sync` or `app.listen` when imported by serverless platforms.
- Set environment variables in Vercel (DATABASE_URL, JWT_SECRET, ADMIN_COOKIE_SECRET).

Database migrations
- Do not use `sequelize.sync({ alter: true })` in production. Use migrations or run schema changes manually.

Next suggestions
- Add migration scripts (sequelize-cli or umzug) for safer schema updates.
- Add a small static serve step to `start` if you want the API to serve the built client.

If you want, I can update this README with more details (example requests, Postman collection, sample admin user, or a `vercel.json` for deployment).

---
Simple README generated by the assistant. Ask me to expand any section.
